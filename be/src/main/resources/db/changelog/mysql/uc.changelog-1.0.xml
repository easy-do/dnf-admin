<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

    <changeSet author="yuzhanfeng" id="20231028" dbms="mysql" failOnError="true">
        <sql dbms="mysql">

            -- d_taiwan.da_item definition

            CREATE TABLE `da_item`
            (
                `id`     bigint(20)  NOT NULL COMMENT '装备id',
                `name`   varchar(64) NOT NULL COMMENT '名称',
                `type`   varchar(12) DEFAULT NULL COMMENT '类型',
                `rarity` varchar(6)  DEFAULT NULL COMMENT '稀有度',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8 COMMENT ='物品缓存';


            -- d_taiwan.da_sign_in_conf definition

            CREATE TABLE `da_sign_in_conf`
            (
                `id`          bigint(20)  NOT NULL AUTO_INCREMENT,
                `config_name` varchar(32) NOT NULL COMMENT '配置名称',
                `config_date` date        NOT NULL COMMENT '签到时间',
                `config_json` text        NOT NULL COMMENT '配置数据',
                `remark`      varchar(100) DEFAULT NULL COMMENT '备注',
                `create_id`   int(11)      DEFAULT NULL,
                `create_time` datetime     DEFAULT NULL,
                `update_time` datetime     DEFAULT NULL,
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              AUTO_INCREMENT = 14
              DEFAULT CHARSET = utf8mb4 COMMENT ='签到配置';

            -- d_taiwan.da_sign_in_log definition

            CREATE TABLE `da_sign_in_log`
            (
                `id`              bigint(20) NOT NULL AUTO_INCREMENT,
                `config_id`       bigint(20) NOT NULL,
                `data_json`       text COMMENT '签到信息',
                `sign_in_role_id` int(11)  DEFAULT NULL COMMENT '签到角色',
                `create_time`     datetime DEFAULT NULL COMMENT '签到时间',
                `update_time`     datetime DEFAULT NULL,
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              AUTO_INCREMENT = 17
              DEFAULT CHARSET = utf8mb4 COMMENT ='签到记录';

            -- d_taiwan.da_game_config definition

            CREATE TABLE `da_game_config`
            (
                `id`        bigint(20)  NOT NULL COMMENT 'id',
                `conf_name` varchar(64) NOT NULL COMMENT '配置名称',
                `conf_type` int(2)      NOT NULL DEFAULT '0' COMMENT '配置类型',
                `conf_data` text        NOT NULL COMMENT '配置信息',
                `conf_key`  varchar(64) NOT NULL COMMENT '配置标签',
                `remark`    varchar(100)         DEFAULT NULL COMMENT '备注',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8 COMMENT ='游戏配置';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231029" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            -- d_taiwan.da_notice_send_log definition

            CREATE TABLE `da_notice_send_log`
            (
                `id`          bigint(20) NOT NULL AUTO_INCREMENT,
                `message`     text COMMENT '消息',
                `create_time` datetime DEFAULT NULL COMMENT '发送时间',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8mb4 COMMENT ='公告发送记录';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231029-1" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            -- d_taiwan.da_mail_send_log definition

            CREATE TABLE `da_mail_send_log`
            (
                `id`           bigint(20) NOT NULL AUTO_INCREMENT,
                `send_details` text COMMENT '发送内容',
                `create_time`  datetime DEFAULT NULL COMMENT '发送时间',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8mb4 COMMENT ='邮件发送记录';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231029-2" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            ALTER TABLE da_item MODIFY COLUMN name varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名称';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231104" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            ALTER TABLE da_game_config MODIFY COLUMN id bigint(20) auto_increment NOT NULL COMMENT 'id';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231104-1" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            INSERT INTO da_game_config (id, conf_name, conf_type, conf_data, conf_key, remark) VALUES(1, '主线任务完成券', 1, '114154', 'complete_task_id', '主线任务完成券的道具id');
            INSERT INTO da_game_config (id, conf_name, conf_type, conf_data, conf_key, remark) VALUES(2, '强化增幅必成等级', 1, '15', 'upgrade_success_level', '强化或增幅等级多少以下不失败');
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231105" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            UPDATE da_game_config SET conf_name='主线任务完成券', conf_type=1, conf_data='8070', conf_key='complete_task_item_id', remark='一键完成主线任务的道具id' WHERE id=1;
            UPDATE da_game_config SET conf_name='强化增幅必成等级', conf_type=1, conf_data='30', conf_key='upgrade_success_level', remark='强化或增幅多少级不失败' WHERE id=2;
        </sql>
    </changeSet>
</databaseChangeLog>
