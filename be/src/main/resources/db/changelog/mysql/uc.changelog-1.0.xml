<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

    <changeSet author="yuzhanfeng" id="20231028" dbms="mysql" failOnError="true">
        <sql dbms="mysql">

            -- d_taiwan.da_item definition

            CREATE TABLE `da_item`
            (
                `id`     bigint(20)  NOT NULL COMMENT '装备id',
                `name`   varchar(64) NOT NULL COMMENT '名称',
                `type`   varchar(12) DEFAULT NULL COMMENT '类型',
                `rarity` varchar(6)  DEFAULT NULL COMMENT '稀有度',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8 COMMENT ='物品缓存';


            -- d_taiwan.da_sign_in_conf definition

            CREATE TABLE `da_sign_in_conf`
            (
                `id`          bigint(20)  NOT NULL AUTO_INCREMENT,
                `config_name` varchar(32) NOT NULL COMMENT '配置名称',
                `config_date` date        NOT NULL COMMENT '签到时间',
                `config_json` text        NOT NULL COMMENT '配置数据',
                `remark`      varchar(100) DEFAULT NULL COMMENT '备注',
                `create_id`   int(11)      DEFAULT NULL,
                `create_time` datetime     DEFAULT NULL,
                `update_time` datetime     DEFAULT NULL,
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              AUTO_INCREMENT = 14
              DEFAULT CHARSET = utf8mb4 COMMENT ='签到配置';

            -- d_taiwan.da_sign_in_log definition

            CREATE TABLE `da_sign_in_log`
            (
                `id`              bigint(20) NOT NULL AUTO_INCREMENT,
                `config_id`       bigint(20) NOT NULL,
                `data_json`       text COMMENT '签到信息',
                `sign_in_role_id` int(11)  DEFAULT NULL COMMENT '签到角色',
                `create_time`     datetime DEFAULT NULL COMMENT '签到时间',
                `update_time`     datetime DEFAULT NULL,
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              AUTO_INCREMENT = 17
              DEFAULT CHARSET = utf8mb4 COMMENT ='签到记录';

            -- d_taiwan.da_game_config definition

            CREATE TABLE `da_game_config`
            (
                `id`        bigint(20)  NOT NULL COMMENT 'id',
                `conf_name` varchar(64) NOT NULL COMMENT '配置名称',
                `conf_type` int(2)      NOT NULL DEFAULT '0' COMMENT '配置类型',
                `conf_data` text        NOT NULL COMMENT '配置信息',
                `conf_key`  varchar(64) NOT NULL COMMENT '配置标签',
                `remark`    varchar(100)         DEFAULT NULL COMMENT '备注',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8 COMMENT ='游戏配置';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231029" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            -- d_taiwan.da_notice_send_log definition

            CREATE TABLE `da_notice_send_log`
            (
                `id`          bigint(20) NOT NULL AUTO_INCREMENT,
                `message`     text COMMENT '消息',
                `create_time` datetime DEFAULT NULL COMMENT '发送时间',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8mb4 COMMENT ='公告发送记录';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231029-1" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            -- d_taiwan.da_mail_send_log definition

            CREATE TABLE `da_mail_send_log`
            (
                `id`           bigint(20) NOT NULL AUTO_INCREMENT,
                `send_details` text COMMENT '发送内容',
                `create_time`  datetime DEFAULT NULL COMMENT '发送时间',
                PRIMARY KEY (`id`)
            ) ENGINE = InnoDB
              DEFAULT CHARSET = utf8mb4 COMMENT ='邮件发送记录';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231029-2" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            ALTER TABLE da_item MODIFY COLUMN name varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名称';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231104" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            ALTER TABLE da_game_config MODIFY COLUMN id bigint(20) auto_increment NOT NULL COMMENT 'id';
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231104-1" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            INSERT INTO da_game_config (id, conf_name, conf_type, conf_data, conf_key, remark) VALUES(1, '主线任务完成券', 1, '114154', 'complete_task_id', '主线任务完成券的道具id');
            INSERT INTO da_game_config (id, conf_name, conf_type, conf_data, conf_key, remark) VALUES(2, '强化增幅必成等级', 1, '15', 'upgrade_success_level', '强化或增幅等级多少以下不失败');
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231105" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            UPDATE da_game_config SET conf_name='主线任务完成券', conf_type=1, conf_data='8070', conf_key='complete_task_item_id', remark='一键完成主线任务的道具id' WHERE id=1;
            UPDATE da_game_config SET conf_name='强化增幅必成等级', conf_type=1, conf_data='30', conf_key='upgrade_success_level', remark='强化或增幅多少级不失败' WHERE id=2;
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231111" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('等级上限', 1, '100', 'max_level', '立即生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('绝望之塔通关后仍可继续挑战(需门票)', 3, 'false', 'unlimit_towerofdespair', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('设置物品免确认(异界装备不影响)', 3, 'true', 'disable_item_routing', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('解除100级及以上的限制', 3, 'false', 'disable_security_protection', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('退出副本免虚弱', 3, 'false', 'disable_giveup_panalty', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('解锁镇魂开门任务', 3, 'false', 'open_timegate', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('允许创建缔造者', 3, 'false', 'enable_creator', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('开启GM功能, (需要添加管理员账号ID至数据库中)', 3, 'false', 'enable_game_master', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('关闭新账号发送的契约邮件', 3, 'false', 'disable_mobile_rewards', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('解除交易限额, 已达上限的第二天生效', 3, 'false', 'disable_trade_limit', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('设置使用拍卖行的最低等级', 1, '1', 'set_auction_min_level', '立即生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('修复拍卖行消耗品上架, 设置最大总价, 建议值2E', 1, '200000000', 'fix_auction_regist_item', '立即生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('关闭NPC回购系统', 3, 'false', 'disable_redeem_item', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('禁用支援兵', 3, 'false', 'disable_striker', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('禁用道具掉落随机强化', 3, 'false', 'disable_drop_random_upgrade', '开启后再关闭需要重启服务端生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('装备解锁时间(秒)', 1, '86400', 'set_item_unlock_time', '立即生效');
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('掉落时随机赋予红字的装备最低等级 (默认55)', 1, '55', 'set_drop_amplify_level', '立即生效,影响洗红字的等级');
        </sql>
    </changeSet>
    <changeSet author="yuzhanfeng" id="20231112" dbms="mysql" failOnError="true">
        <sql dbms="mysql">
            INSERT INTO da_game_config (conf_name, conf_type, conf_data, conf_key, remark) VALUES('启动后自动加载pvf数据到数据库', 3, 'true', 'gm_reader_pvf', '后台参数,是否启动后加载pvf文件数据');
        </sql>
    </changeSet>
</databaseChangeLog>
